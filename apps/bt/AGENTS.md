# Trading Backtesting

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
**Marimo Notebookå®Ÿè¡Œã‚·ã‚¹ãƒ†ãƒ **ã‚’ä¸­å¿ƒã¨ã—ãŸé«˜é€Ÿãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒ„ãƒ¼ãƒ«ã€‚VectorBTåŸºç›¤ã®é«˜é€Ÿãƒ™ã‚¯ãƒˆãƒ«åŒ–ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»Marimoã«ã‚ˆã‚‹é™çš„HTMLå‡ºåŠ›ãƒ»YAMLè¨­å®šã«ã‚ˆã‚‹æŸ”è»Ÿãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç®¡ç†ã‚’æä¾›ã€‚apps/ts/ã‹ã‚‰ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’å¯èƒ½ã«ã™ã‚‹FastAPI ã‚µãƒ¼ãƒãƒ¼æ©Ÿèƒ½ã‚‚æ­è¼‰ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯apps/ts/web/ ã«ç§»è¡Œæ¸ˆã¿ã€‚

## é‡è¦åŸå‰‡
- **è¡¨é¢çš„ãªã”ã¾ã‹ã—ã‚’çµ¶å¯¾ã«è¡Œã‚ãªã„ã€‚æ ¹æœ¬çš„ãªè§£æ±ºãŒã§ããªã„ã¨ãã¯ã€ã€Œä»Šã¯â—‹â—‹ã®ç†ç”±ã§è§£æ±ºã§ããªã‹ã£ãŸã€ã¨ç´ ç›´ã«è¨€ã†**
- **Simple is BEST !!!**
- å¯èƒ½ãªé™ã‚Šå‹å®‰å…¨æ€§ã‚’è¿½æ±‚ã™ã‚‹ã€‚pydanticã‚’ç©æ¥µçš„ã«ä½¿ç”¨ã™ã‚‹
- **pandasã®Seriesã‚’ä½¿ã†ã¨ãã¯ã€å¿…ãšä½•ã®å‹ã®seriesã‹ã‚’æ˜è¨˜ã™ã‚‹**ï¼ˆä¾‹ï¼š`pd.Series[float]`, `pd.Series[int]`, `pd.Series[str]`ç­‰ï¼‰
- vectorbté–¢é€£ã®å‡¦ç†ãŒç™ºç”Ÿã—ãŸã¨ã
  - ã™ãã«localã®documents(docs/vectorbt/)ã‚’å‚ç…§ã™ã‚‹
  - localã«æƒ…å ±ãŒãªã‘ã‚Œã°ã€é€Ÿã‚„ã‹ã«å…¬å¼document(https://vectorbt.dev/api/)ã‚’å‚ç…§ã™ã‚‹
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ´»ç”¨**: è»Šè¼ªã®å†ç™ºæ˜ã‚’é¿ã‘ã€æ—¢å­˜æ©Ÿèƒ½ã‚’æœ€å¤§æ´»ç”¨
- **è¨­è¨ˆåŸå‰‡**: Single Responsibility Principle, DRYåŸå‰‡ã®å³å®ˆ
- unittestã‚’å¿…ãšä½œæˆã™ã‚‹

## ğŸ›¡ï¸ æœ¬ç•ªç’°å¢ƒå¯¾å¿œãƒ»ä¿¡é ¼æ€§å¼·åŒ–

### APIæ¥ç¶šç®¡ç†
**è©³ç´°**: `.claude/skills/api-architecture/SKILL.md`
- **çµ±ä¸€APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: `src/api/`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹REST APIï¼ˆlocalhost:3001ï¼‰çµŒç”±ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: HTTPã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **æ—§å®Ÿè£…å‰Šé™¤**: `src/data/database.py`å®Œå…¨å‰Šé™¤ï¼ˆSQLiteç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹å»ƒæ­¢ï¼‰

### KellyåŸºæº–æ•°å€¤å®‰å…¨æ€§
- **ã‚¼ãƒ­é™¤ç®—å¯¾ç­–**: Kellyä¿‚æ•°è¨ˆç®—æ™‚ã®åˆ†æ¯ãƒã‚§ãƒƒã‚¯ï¼ˆb > 0 æ¤œè¨¼ï¼‰
- **NaN/Infæ¤œè¨¼**: ãƒªã‚¿ãƒ¼ãƒ³æ¯”è¼ƒæ™‚ã®ç•°å¸¸å€¤æ¤œå‡ºãƒ»å®‰å…¨ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
- **å®Ÿè£…ç®‡æ‰€**: `src/strategies/core/mixins/portfolio_analyzer_mixin_kelly.py:168-171`

### ä¸¦åˆ—å‡¦ç†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- **ProcessPoolExecutor ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 1çµ„ã¿åˆã‚ã›ã‚ãŸã‚Š600ç§’ï¼ˆ10åˆ†ï¼‰åˆ¶é™
- **ãƒãƒ³ã‚°ã‚¢ãƒƒãƒ—é˜²æ­¢**: ç„¡é™ãƒ«ãƒ¼ãƒ—ãƒ»ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œå‡ºã«ã‚ˆã‚‹è‡ªå‹•ã‚¹ã‚­ãƒƒãƒ—
- **å®Ÿè£…ç®‡æ‰€**: `src/optimization/engine.py:462-498`

### ãƒ‡ãƒ¼ã‚¿å“è³ªæ¤œè¨¼
- **ç©ºDataFrameæ¤œå‡º**: Close/Volume ãƒ‡ãƒ¼ã‚¿ã®å…¨NaNãƒã‚§ãƒƒã‚¯
- **æ—©æœŸã‚¨ãƒ©ãƒ¼é€šçŸ¥**: ãƒ‡ãƒ¼ã‚¿å“è³ªå•é¡Œã‚’å‡¦ç†é–‹å§‹å‰ã«æ¤œå‡º
- **å®Ÿè£…ç®‡æ‰€**: `src/strategies/signals/processor.py:220-228`

### ãƒ†ã‚¹ãƒˆå“è³ª
- **100%ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 1,996/1,996 passedï¼ˆ2026-02-03æ™‚ç‚¹ï¼‰
- **ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬**: pytest-covå°å…¥æ¸ˆã¿ã€ãƒ©ã‚¤ãƒ³ã‚«ãƒãƒ¬ãƒƒã‚¸66%ï¼ˆç›®æ¨™70%: bt-016ï¼‰ã€CIã‚²ãƒ¼ãƒˆ65%
- **åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**: unit/integration/security å„ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒªå®Œå‚™

## ğŸ¯ çµ±ä¸€Signalsã‚·ã‚¹ãƒ†ãƒ 
**è©³ç´°**: `.claude/skills/signal-system/SKILL.md`

### æ¦‚å¿µçµ±ä¸€ã®åŸå‰‡
- **Entry Filtersï¼ˆçµã‚Šè¾¼ã¿ï¼‰**: åŸºæœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶ã‚’**ANDæ¡ä»¶ã§çµã‚Šè¾¼ã‚€**ï¼ˆ`entry_filter_params`ï¼‰
- **Exit Triggersï¼ˆç™ºç«ï¼‰**: åŸºæœ¬ã‚¨ã‚°ã‚¸ãƒƒãƒˆæ¡ä»¶ã«**ORæ¡ä»¶ã§è¿½åŠ ç™ºç«**ï¼ˆ`exit_trigger_params`ï¼‰
- **35ç¨®é¡ã‚·ã‚°ãƒŠãƒ«çµ±åˆ**: breakout/volume/trading_value/beta/fundamental/rsi_threshold/sector_strengthç­‰
- **ä¸¡ç”¨è¨­è¨ˆ**: åŒä¸€ã‚·ã‚°ãƒŠãƒ«é–¢æ•°ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ»ã‚¨ã‚°ã‚¸ãƒƒãƒˆä¸¡å¯¾å¿œï¼ˆdirection/conditionåˆ‡ã‚Šæ›¿ãˆï¼‰

## ğŸš¨ é‡è¦ãªVectorBTè¨­å®š

### å¤šè³‡ç”£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè¨­å®š
**è©³ç´°**: `docs/vectorbt/portfolio-optimization.md`
- VectorBT `cash_sharing=True` + `group_by=True`ã®æ­£ã—ã„è¨­å®šæ–¹æ³•
- 2æ®µéšè³‡é‡‘é…åˆ†æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ398éŠ˜æŸ„â†’77éŠ˜æŸ„ã§5.2å€æ”¹å–„ï¼‰

### KellyåŸºæº–ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæœ€é©åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæœ‰åŠ¹ï¼‰
**è©³ç´°**: `docs/kelly-criterion-allocation.md`
- **KellyåŸºæº–ã®ã¿ä½¿ç”¨**: å¾“æ¥æ‰‹æ³•ã¯å®Œå…¨å»ƒæ­¢ã€KellyåŸºæº–ã«çµ±ä¸€
- **è³‡é‡‘é…åˆ†æœ€é©åŒ–**: åŠKellyãƒ»åˆ†æ•°Kellyï¼ˆf=0.5æ¨å¥¨ï¼‰ã«ã‚ˆã‚‹å®‰å…¨æ€§é‡è¦–ã®é…åˆ†æˆ¦ç•¥

### Î²å€¤ã‚·ã‚°ãƒŠãƒ«ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ãƒ­ãƒ¼ãƒ‰
**è©³ç´°**: `docs/fixes/beta-filter-benchmark-data-loading.md`
- **è‡ªå‹•åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ **: Î²å€¤ã‚·ã‚°ãƒŠãƒ«ãŒæœ‰åŠ¹ãªå ´åˆã«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ãƒ­ãƒ¼ãƒ‰

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **vectorbt** (>=0.26.0): é«˜é€Ÿãƒ™ã‚¯ãƒˆãƒ«åŒ–ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **marimo** (>=0.10.0): é™çš„HTMLå‡ºåŠ›å¯¾å¿œNotebookãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **pydantic** (>=2.0.0): ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **pandas/numpy**: ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»æ•°å€¤è¨ˆç®—
- **fastapi** (>=0.115.0): ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆAPI ã‚µãƒ¼ãƒãƒ¼
- **uvicorn** (>=0.34.0): ASGIã‚µãƒ¼ãƒãƒ¼
- **typer/rich**: CLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ç¾åŒ–

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
- **pyright/mypy**: å‹ãƒã‚§ãƒƒã‚¯ãƒ»é™çš„è§£æ
- **ruff**: ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
- **pytest**: ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

## æˆ¦ç•¥YAML ã®äºŒé‡ã‚½ãƒ¼ã‚¹æ§‹é€ ï¼ˆé‡è¦ï¼‰

æˆ¦ç•¥è¨­å®šYAMLã¯**ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å†…**ã¨**XDGæº–æ‹ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**ã®2ç®‡æ‰€ã«å­˜åœ¨ã™ã‚‹ã€‚

| ã‚«ãƒ†ã‚´ãƒª | æ ¼ç´å ´æ‰€ | æ€§è³ª |
|---|---|---|
| `production` | `config/strategies/production/` | Gitç®¡ç†ãƒ»èª­ã¿å–ã‚Šå°‚ç”¨ |
| `reference` | `config/strategies/reference/` | Gitç®¡ç†ãƒ»èª­ã¿å–ã‚Šå°‚ç”¨ |
| `legacy` | `config/strategies/legacy/` | Gitç®¡ç†ãƒ»èª­ã¿å–ã‚Šå°‚ç”¨ |
| `experimental` | `~/.local/share/trading25/strategies/experimental/` | **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†å¯èƒ½ãƒ»Gitç®¡ç†å¤–** |

- **æ¤œç´¢å„ªå…ˆé †**: experimentalï¼ˆå¤–éƒ¨ï¼‰â†’ production â†’ reference â†’ legacyï¼ˆ`src/paths/constants.py: SEARCH_ORDER`ï¼‰
- **æ›¸ãè¾¼ã¿å…ˆ**: æ–°è¦ä½œæˆãƒ»è¤‡è£½ãƒ»ãƒªãƒãƒ¼ãƒ ã¯å¸¸ã« `experimental`ï¼ˆå¤–éƒ¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã«ä¿å­˜
- **ç’°å¢ƒå¤‰æ•°**: `TRADING25_DATA_DIR` / `TRADING25_STRATEGIES_DIR` ã§ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹å¤‰æ›´å¯èƒ½
- **å®Ÿè£…**: `src/paths/resolver.py`ï¼ˆæ¤œç´¢ãƒ»ãƒãƒ¼ã‚¸ï¼‰ã€`src/strategy_config/loader.py`ï¼ˆèª­ã¿æ›¸ãï¼‰

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
/Users/shinjiroaso/dev/trading25/apps/bt/
â”œâ”€â”€ config/                    # YAMLè¨­å®šã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”œâ”€â”€ production/       # æœ¬ç•ªç’°å¢ƒç”¨æˆ¦ç•¥ï¼ˆGitç®¡ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ legacy/          # ãƒ¬ã‚¬ã‚·ãƒ¼æˆ¦ç•¥ï¼ˆGitç®¡ç†ï¼‰
â”‚   â”‚   â””â”€â”€ reference/       # ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆGitç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ optimization/        # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã‚°ãƒªãƒƒãƒ‰è¨­å®š
â”‚   â””â”€â”€ default.yaml         # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
â”œâ”€â”€ notebooks/
â”‚   â”œâ”€â”€ templates/           # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆNotebook
â”‚   â””â”€â”€ generated/           # ï¼ˆå»ƒæ­¢: XDGæº–æ‹ ãƒ‘ã‚¹ã¸ç§»è¡Œï¼‰
â”œâ”€â”€ docs/                    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆ843+ testsï¼‰
â””â”€â”€ src/                    # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

~/.local/share/trading25/          # XDGæº–æ‹  å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”œâ”€â”€ strategies/
â”‚   â””â”€â”€ experimental/              # å®Ÿé¨“çš„æˆ¦ç•¥ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†å¯èƒ½ãƒ»Gitç®¡ç†å¤–ï¼‰
â”œâ”€â”€ backtest/
â”‚   â”œâ”€â”€ results/{strategy}/        # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœHTML
â”‚   â””â”€â”€ optimization/{strategy}/   # æœ€é©åŒ–çµæœ
â”œâ”€â”€ optimization/                  # æœ€é©åŒ–ã‚°ãƒªãƒƒãƒ‰è¨­å®š
â””â”€â”€ cache/                         # ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    â”œâ”€â”€ agent/              # æˆ¦ç•¥è‡ªå‹•ç”Ÿæˆãƒ»æœ€é©åŒ–ï¼ˆGA/Optunaï¼‰
    â”œâ”€â”€ cli_bt/             # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆCLIï¼ˆbt ã‚³ãƒãƒ³ãƒ‰ï¼‰
    â”œâ”€â”€ cli_portfolio/      # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªCLIï¼ˆportfolio ã‚³ãƒãƒ³ãƒ‰ï¼‰
    â”œâ”€â”€ api/                # REST APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆDataset/Market/Portfolioï¼‰
    â”œâ”€â”€ analysis/           # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æï¼ˆPCA/ãƒªã‚¹ã‚¯åˆ†æ/å›å¸°åˆ†æï¼‰
    â”œâ”€â”€ data/               # ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
    â”œâ”€â”€ backtest/           # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆMarimoå®Ÿè¡Œï¼‰
    â”œâ”€â”€ strategy_config/    # æˆ¦ç•¥è¨­å®šç®¡ç†ï¼ˆYAMLï¼‰
    â”œâ”€â”€ optimization/       # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ 
    â”œâ”€â”€ server/             # FastAPI ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆAPIï¼‰
    â”œâ”€â”€ strategies/         # æˆ¦ç•¥å®Ÿè£…ï¼ˆYAMLå®Œå…¨åˆ¶å¾¡ç‰ˆï¼‰
    â”œâ”€â”€ models/             # çµ±ä¸€ãƒ¢ãƒ‡ãƒ«ï¼ˆPydanticå‹å®‰å…¨æ€§ï¼‰
    â””â”€â”€ utils/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

**è©³ç´°**: `src/`é…ä¸‹ã®è©³ç´°ã¯ã‚³ãƒ¼ãƒ‰ã¾ãŸã¯å„Skillsã‚’å‚ç…§

## åŸºæœ¬ä½¿ç”¨æ–¹æ³•

### ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
uv sync
```

### ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆCLIï¼ˆbt ã‚³ãƒãƒ³ãƒ‰ï¼‰
**è©³ç´°**: `.claude/skills/cli-commands/SKILL.md`

```bash
# ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
uv run bt backtest range_break_v5

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–
uv run bt backtest range_break_v6 --optimize

# æˆ¦ç•¥ä¸€è¦§
uv run bt list

# è¨­å®šæ¤œè¨¼
uv run bt validate range_break_v5

# APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•
uv run bt server
uv run bt server --port 3002 --reload
```

### é–‹ç™ºãƒ»æ¤œè¨¼
```bash
# ãƒªãƒ³ãƒˆ
uv run ruff check src/

# å‹ãƒã‚§ãƒƒã‚¯
uv run pyright src/

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
uv run pytest tests/
```

## è©³ç´°æƒ…å ±

### Skillsï¼ˆon-demand loadingï¼‰
- **Agent System**: `.claude/skills/agent-system/SKILL.md`ï¼ˆæˆ¦ç•¥è‡ªå‹•ç”Ÿæˆãƒ»æœ€é©åŒ–ï¼‰
- **API Architecture**: `.claude/skills/api-architecture/SKILL.md`
- **Signal System**: `.claude/skills/signal-system/SKILL.md`
- **CLI Commands**: `.claude/skills/cli-commands/SKILL.md`
- **Optimization**: `.claude/skills/optimization/SKILL.md`
- **Strategy Config**: `.claude/skills/strategy-config/SKILL.md`

### User-Level Skills
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã®ã‚¹ã‚­ãƒ«ï¼ˆ`~/.claude/skills/`ï¼‰ã‚‚åˆ©ç”¨å¯èƒ½:
- **`local-issues`** â€” ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®Issueç®¡ç†ã€‚`issues/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã§Issueã‚’ç®¡ç†ã™ã‚‹ã€‚æ“ä½œ: open, list, show, edit, start, close, wontfix, deps, summaryã€‚Issueã®ä½œæˆãƒ»æ›´æ–°ãƒ»ã‚¯ãƒ­ãƒ¼ã‚ºæ™‚ã¯ã“ã®ã‚¹ã‚­ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã†ã“ã¨ã€‚
- **`ask-codex`** â€” Plan mode ã§ãƒ—ãƒ©ãƒ³ç¢ºå®šå‰ã« Codex CLI ã¸è©•ä¾¡ã‚’ä¾é ¼ã™ã‚‹ã€‚

### Issueç®¡ç†
- **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `issues/`ï¼ˆã‚ªãƒ¼ãƒ—ãƒ³Issueï¼‰ã€`issues/done/`ï¼ˆã‚¯ãƒ­ãƒ¼ã‚ºæ¸ˆã¿ï¼‰
- **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: `{id}-{slug}.md`ï¼ˆä¾‹: `bt-016-test-coverage-70.md`ï¼‰
- **/finish æ™‚**: ã‚ªãƒ¼ãƒ—ãƒ³Issueã‚’ç¢ºèªã—ã€è©²å½“ã™ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°ã‚¯ãƒ­ãƒ¼ã‚ºã¾ãŸã¯é€²æ—æ›´æ–°ã™ã‚‹

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **æˆ¦ç•¥ä¸€è¦§**: `docs/strategies.md`
- **ã‚³ãƒãƒ³ãƒ‰è©³ç´°**: `docs/commands.md`
- **æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ **: `docs/parameter-optimization-system-v2.md`
- **VectorBT**: `docs/vectorbt/`

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç‰¹å¾´

### Marimoå®Ÿè¡Œã‚·ã‚¹ãƒ†ãƒ 
- é™çš„HTMLå‡ºåŠ›ï¼ˆã‚³ãƒ¼ãƒ‰éè¡¨ç¤ºãƒ»å…¨è¡Œãƒ†ãƒ¼ãƒ–ãƒ«å¯¾å¿œï¼‰
- CLIãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤ºï¼ˆã‚¹ãƒ”ãƒŠãƒ¼ãƒ»çµŒéæ™‚é–“ï¼‰
- YAMLè¨­å®šçµ±åˆãƒ»JSON ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å—ã‘æ¸¡ã—

### çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ
- **Notebook First**: åˆ†æãƒ»å¯è¦–åŒ–ä¸­å¿ƒã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- **å‹å®‰å…¨æ€§é‡è¦–**: Pythonæ¨™æº–å‹ãƒ’ãƒ³ãƒˆã«ã‚ˆã‚‹è»½é‡ãƒ»é«˜é€Ÿãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **YAMLå®Œå…¨åˆ¶å¾¡**: æˆ¦ç•¥å®Ÿè£…ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å®Œå…¨å‰Šé™¤ï¼ˆ1,000+ lineså‰Šæ¸›ï¼‰ãƒ»`entry_filter_params`/`exit_trigger_params`ã«ã‚ˆã‚‹çµ±ä¸€ç®¡ç†
- **APIçµ±åˆ**: ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼å…¨é¢APIç§»è¡Œå®Œäº†ï¼ˆREST APIçµŒç”±ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ï¼‰

### VectorBTä½¿ç”¨ã®åˆ©ç‚¹
- 100å€ä»¥ä¸Šã®é«˜é€ŸåŒ–ã‚’å®Ÿç¾
- ãƒ™ã‚¯ãƒˆãƒ«åŒ–å‡¦ç†ã«ã‚ˆã‚‹å¤§å¹…ãªæ€§èƒ½å‘ä¸Š
- å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå¯¾å¿œ

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€**Notebookä¸­å¿ƒ**ãƒ»**VectorBTé«˜é€ŸåŒ–**ãƒ»**çµ±ä¸€ãƒ¢ãƒ‡ãƒ«ç®¡ç†**ãƒ»**çµ±ä¸€ã‚·ã‚°ãƒŠãƒ«ã‚·ã‚¹ãƒ†ãƒ **ã‚’çµ„ã¿åˆã‚ã›ãŸã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§å‹å®‰å…¨ãªæˆ¦ç•¥åˆ†æãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚
